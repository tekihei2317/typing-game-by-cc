# 設計

## 要件

どうしようかな〜。ワードファイルをアップロードして個人的に練習できるようにするのか、それともワードは固定にするのか…。難しい問題。著作権的な問題もあるかもしれないし、個人的な利用に留めた方が良いのではないか？と。まぁそんなに使われることはないだろうからいいか…。

- e-typingのお題をいつでも練習できるサイト
    - お題のワードのXMLファイルがあるので、それをパースしてDBに保存しておく
    - [e-typingワード](https://uaaaaaaaa.com/typing/word)
- 技術スタック
    - Cloudflare Workersにデプロイする。フロントエンドはReactのSPA、APIは
    - フロントエンド: React（SPA）、Tailwind CSS、TanstackRouter、Tanstack Query
    - API: Cloudflare Workers、tRPC、Prismaよりdrizzle…? 容量制限が気になる

## 機能

アプリ名「タイピングいつでも練習」ダサっ！

ログイン機能

- ユーザーはメールアドレスとパスワードでユーザー登録、ログインをすることができる
- ユーザーはログアウトできる

タイピング練習機能

- ユーザーはお題を選択してタイピング練習することができる
    - タイピング練習では、お題のワードが15問のランダムに出題される
- タイピング練習では、お題の漢字混じり文、ひらがな、ローマ字が表示され、ローマ字を入力する
- タイピング練習が終わったら、練習結果画面を確認できる
- 練習結果画面のサマリでは、スコア、入力文字数、かかった時間、ミス数、WPM、正解率、初速、RKPM（初速抜きのRKPM）が表示される
- 練習結果画面では、各ワードの初速、KPM、RKPM、ミス数、その時点でのスコアが表で確認できる

練習履歴確認機能

- ユーザーは、時系列の降順で表示された練習履歴を確認できる。練習履歴は1ページに20件表示する。
    - 練習履歴の表には、練習結果画面のサマリに表示しているデータが表示される
- ユーザーは、練習履歴の詳細をクリックして、各ワードの結果を確認することができる。

---

まぁe-typingとうあーメモがあればできることなんだけれどね…

とりあえずこんな感じでどうでしょうか。

## 進め方

**準備**

- shadcn/uiを使って画面のモックアップを作成してもらう。いや〜TailwindCSS + htmlでもいいのかな。どっちがいいだろう。
    - 表示する内容について調整しながら仕上げる
    - [Tailwind モック - Search / X](https://x.com/engineerbasulto/status/1943943580722377064/photo/1)　このカタログ風の表示いいですね。
- Cloudflare Workersプロジェクトをセットアップする。1つのリポジトリでフロントエンドと、WorkersのAPIを動かす（前やったやつ）。tRPCでAPIを作成して、疎通を確認する。
- Cloudflareにデプロイして、動いていることを確認する

**タイピング練習機能の実装**

- コアとなるタイピング練習機能を実装する。データの永続化はまだ実装しない。タイピング練習を行って結果を確認できるようにする。
- お題はどうしようかな、先にお題だけデータベースを作っておく必要があるかな。

**データベース作って永続化する**

- データベース設計を行い、マイグレーションをする
- 認証機能を実装し、ユーザー登録、ログイン、ログアウトができるようにする
- タイピング練習結果を登録するAPIを作成し、つなぎ込む
- タイピング練習履歴を取得するAPIを作成し、つなぎ込む

**仕上げ**

- バグ修正等
- APIのテストとか書きながら進めた方がいいのかねぇ
